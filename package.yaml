name: qmuli
version: "0.0.1"
synopsis: EDSL for building infrastructure on AWS
description: EDSL for building infrastructure on AWS
category: AWS, Cloud
maintainer: Alex Babkin
stability: experimental
license: MIT
license-file: LICENSE.md

github: qmuli/qmuli

extra-source-files:
  - CHANGELOG.md
  - README.md
  - stack.yaml

dependencies:
  - base >= 4.8 && < 5
  - aeson >= 0.11.2.1
  - aeson-pretty
  - data-default
  - directory
  - unix
  - text
  - transformers
  - mtl
  - operational
  - bytestring
  - hashable
  - unordered-containers
  - lens
  - stratosphere
  - amazonka
  - amazonka-cloudformation
  - amazonka-cognito-identity
  - amazonka-cognito-idp
  - amazonka-core
  - amazonka-dynamodb
  - amazonka-s3
  - conduit
  - conduit-extra
  - resourcet
  - turtle
  - executable-path
  - heredoc
  - system-extra
  - process
  - http-client
  - http-client-tls
  - either
  - jwt
  - lens-aeson
  - exceptions
  - transformers-base


library:
  source-dirs:
    - src
  exposed-modules:
    - Qi
    - Qi.Config.AWS.ApiGw
    - Qi.Config.AWS.CF
    - Qi.Config.AWS.DDB
    - Qi.Config.AWS.Lambda
    - Qi.Config.AWS.S3
    - Qi.Config.Identifier
    - Qi.Config.CF
    - Qi.Config.AWS
    - Qi.Program.Lambda.Interface
    - Qi.Program.Config.Interface
    - Qi.Util
    - Qi.Util.ApiGw
    - Qi.Util.Cognito
    - Qi.Util.CustomCFResource
    - Qi.Program.Config.Interpreters.Build
    - Qi.Config.AWS.Lambda.Profile
    - Qi.Config.AWS.ApiGw.ApiMethod.Profile
  ghc-options: -Wall

executables:
  # qmuli-simple-s3-copy:
    # main: Main.hs
    # source-dirs: examples/simple-s3-copy/src
    # dependencies:
      # - base >= 4.8 && < 5
      # - qmuli
    # ghc-options: -Wall -static -threaded -rtsopts -with-rtsopts=-N
  # qmuli-fold-s3-content:
    # main: Main.hs
    # source-dirs: examples/fold-s3-content/src
    # dependencies:
      # - base >= 4.8 && < 5
      # - qmuli
    # ghc-options: -Wall -static -threaded -rtsopts -with-rtsopts=-N
  # qmuli-apigw-lambda-s3:
    # main: Main.hs
    # source-dirs: examples/apigw-lambda-s3/src
    # dependencies:
      # - base >= 4.8 && < 5
      # - qmuli
    # ghc-options: -Wall -static -threaded -rtsopts -with-rtsopts=-N
  # qmuli-apigw-lambda-dynamodb:
    # main: Main.hs
    # source-dirs: examples/apigw-lambda-dynamodb/src
    # dependencies:
      # - base >= 4.8 && < 5
      # - qmuli
    # ghc-options: -Wall -static -threaded -rtsopts -with-rtsopts=-N
  # qmuli-cognito:
    # main: Main.hs
    # source-dirs: examples/cognito/src
    # dependencies:
      # - base >= 4.8 && < 5
      # - qmuli
    # ghc-options: -Wall -static -threaded -rtsopts -with-rtsopts=-N


tests:
  tasty:
    main: Main.hs
    source-dirs:
      - tests
    dependencies:
      - base
      - qmuli
      - stratosphere
      - tasty
      - tasty-hspec
      - heredoc
      - vector
        
